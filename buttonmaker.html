
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Canvas Button Generator</title>
<style>
  body {
    font-family: 'Segoe UI', Roboto, sans-serif;
    background: #f8fafc;
    color: #333;
    margin: 0;
    padding: 2rem;
  }

  h1 {
    text-align: center;
    color: #2563eb;
    margin-bottom: 1rem;
  }

  .container {
    max-width: 800px;
    margin: 0 auto;
    background: white;
    padding: 2rem;
    border-radius: 1rem;
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
  }

  label {
    font-weight: 600;
  }

  input[type="text"], input[type="url"], input[type="file"] {
    width: 100%;
    padding: 0.6rem;
    margin-top: 0.25rem;
    margin-bottom: 1rem;
    border: 1px solid #ccc;
    border-radius: 0.5rem;
  }

  button {
    background: #2563eb;
    color: white;
    border: none;
    padding: 0.7rem 1.4rem;
    border-radius: 0.5rem;
    cursor: pointer;
    font-size: 1rem;
    transition: background 0.2s ease;
  }

  button:hover {
    background: #1d4ed8;
  }

  .output {
    margin-top: 2rem;
  }

  .preview {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(15.5rem, 15.5rem));
    gap: 16px;
    justify-content: center;
    padding: 16px;
    background: #f1f5f9;
    border-radius: 0.5rem;
  }

  .preview a {
    text-align: center;
    color: #fff;
    border-radius: 8px;
    padding: 12px 16px;
    text-decoration: none;
    font-weight: 600;
  }

  textarea {
    width: 100%;
    height: 200px;
    margin-top: 1rem;
    font-family: monospace;
    padding: 1rem;
    border-radius: 0.5rem;
    border: 1px solid #ccc;
  }

  .note {
    font-size: 0.9rem;
    color: #555;
    margin-top: 0.5rem;
  }
</style>
</head>
<body>
  <h1>Canvas Button Generator</h1>
  <div class="container">
    <label for="title">Button Title:</label>
    <input type="text" id="title" placeholder="e.g. Tutorial Videos">

    <label for="link">Button Link (URL):</label>
    <input type="url" id="link" placeholder="e.g. https://canvas.manchester.ac.uk/...">

    <button id="generateBtn">Generate Button</button>

    <hr style="margin: 2rem 0;">

    <label for="fileUpload">Or Upload a CSV File (title,link):</label>
    <input type="file" id="fileUpload" accept=".csv">
    <p class="note">Example CSV content:<br>
    <code>Videos,https://example.com/videos<br>Resources,https://example.com/resources</code></p>

    <div class="output">
      <h2>Preview:</h2>
      <div id="preview" class="preview"></div>

      <h2>Generated HTML Code:</h2>
      <textarea id="output" readonly></textarea>
    </div>
  </div>

<script>
  const previewDiv = document.getElementById("preview");
  const outputArea = document.getElementById("output");
  const colors = ["#fe66d4","#4f46e5","#10b981","#f97316","#ef4444","#06b6d4","#a855f7","#84cc16","#eab308"];

  function randomColor() {
    return colors[Math.floor(Math.random() * colors.length)];
  }

  function createButtonHTML(title, link) {
    const color = randomColor();
    return `<a class="btn-large btn" style="text-align: center; background-color: ${color}; color: #ffffff; border-radius: 8px; padding: 12px 16px;" title="${title}" href="${link}">${title}</a>`;
  }

  function updateOutput(buttons) {
    const containerHTML = `<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(15.5rem, 15.5rem)); gap: 16px; justify-content: center; padding: 16px; max-width: 960px; margin: 0 auto;" role="group" aria-label="Unit Interactive Documents">\n${buttons.join("\n")}\n</div>`;
    outputArea.value = containerHTML;
    previewDiv.innerHTML = buttons.join("");
  }

  document.getElementById("generateBtn").addEventListener("click", () => {
    const title = document.getElementById("title").value.trim();
    const link = document.getElementById("link").value.trim();
    if (!title || !link) {
      alert("Please enter both a title and a link.");
      return;
    }
    const button = createButtonHTML(title, link);
    updateOutput([button]);
  });

  document.getElementById("fileUpload").addEventListener("change", (event) => {
    const file = event.target.files[0];
    if (!file) return;
    const reader = new FileReader();
    reader.onload = (e) => {
      const lines = e.target.result.split(/\r?\n/).filter(line => line.trim() !== "");
      const buttons = lines.map(line => {
        const [title, link] = line.split(",");
        return createButtonHTML(title.trim(), link.trim());
      });
      updateOutput(buttons);
    };
    reader.readAsText(file);
  });
</script>
</body>
</html>
